<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Surprise!</title>
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
  <style>
    /* Basic reset and full-page setup */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden; /* Prevent scrolling */
    }
    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(45deg, #ff9a9e, #fad0c4);
      position: relative;
      color: #fff;
    }
    
    /* Start Screen */
    #start-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      transition: opacity 1s ease;
    }
    #start-screen.fade-out {
      opacity: 0;
    }
    #start-screen h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    #start-screen button {
      padding: 10px 20px;
      font-size: 1.2rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: rgba(255,255,255,0.8);
      color: #ff6f91;
      transition: background-color 0.3s;
    }
    #start-screen button:hover {
      background-color: rgba(255,255,255,1);
    }
    
    /* Compliment Container (covers the full page) */
    #compliment-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 5;
      display: none; /* Initially hidden */
    }
    .compliment {
      position: absolute;
      opacity: 0;
      transition: opacity 0.5s ease;
      white-space: nowrap;
    }
    
    /* Final Question */
    #final-question {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 15;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      transition: opacity 1s ease;
    }
    #final-question.visible {
      display: flex;
      opacity: 1;
    }
    #final-question h1 {
      font-size: 2rem;
      margin-bottom: 20px;
    }
    #final-question button {
      padding: 10px 20px;
      font-size: 1.2rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: rgba(255,255,255,0.8);
      color: #ff6f91;
      margin: 0 10px;
      transition: background-color 0.3s;
    }
    #final-question button:hover {
      background-color: rgba(255,255,255,1);
    }
  </style>
</head>
<body>
  <!-- Start Screen -->
  <div id="start-screen">
    <h1>Click here for a surprise</h1>
    <button id="start-btn">Enter</button>
  </div>
  
  <!-- Compliment Container -->
  <div id="compliment-container"></div>
  
  <!-- Final Question -->
  <div id="final-question">
    <h1>Will you be my Valentine?</h1>
    <button id="yes-btn">Yes</button>
    <button id="no-btn">No</button>
  </div>
  
  <!-- Hidden Spotify iframe for autoplaying music (src is set on click) -->
  <iframe id="spotify" allow="autoplay; encrypted-media" style="position:absolute; left:-9999px; width:0; height:0; border:0;"></iframe>
  
  <script>
    // Get DOM elements
    const startScreen = document.getElementById('start-screen');
    const startBtn = document.getElementById('start-btn');
    const complimentContainer = document.getElementById('compliment-container');
    const finalQuestion = document.getElementById('final-question');
    const spotifyFrame = document.getElementById('spotify');
    
    // Array of compliment objects (each with text and an image)
    const compliments = [
      { text: "You are radiant.", image: "https://via.placeholder.com/100?text=Radiant" },
      { text: "Your laugh is infectious.", image: "https://via.placeholder.com/100?text=Laugh" },
      { text: "You light up the room.", image: "https://via.placeholder.com/100?text=Light" },
      { text: "Your smile is enchanting.", image: "https://via.placeholder.com/100?text=Smile" },
      { text: "You are a true gem.", image: "https://via.placeholder.com/100?text=Gem" },
      { text: "Your kindness knows no bounds.", image: "https://via.placeholder.com/100?text=Kindness" },
      { text: "You make life beautiful.", image: "https://via.placeholder.com/100?text=Beautiful" },
      { text: "Your energy is captivating.", image: "https://via.placeholder.com/100?text=Energy" }
    ];
    
    let complimentInterval;
    
    // When the user clicks "Enter"
    startBtn.addEventListener('click', () => {
      // Set the Spotify iframe's src to trigger music playback
      spotifyFrame.src = "https://open.spotify.com/embed/playlist/4sXPYlJMOZxEk2d5jzASBS?utm_source=generator&autoplay=1";
      
      // Fade out the start screen
      startScreen.classList.add('fade-out');
      setTimeout(() => {
        startScreen.style.display = 'none';
        // Begin the compliment (and image) phase
        startCompliments();
      }, 1000);
    });
    
    // Begin the compliment phase (with a slower pace)
    function startCompliments() {
      complimentContainer.style.display = 'block';
      // Add a new compliment every 1000ms (1 second)
      complimentInterval = setInterval(addCompliment, 1000);
      // After 15 seconds, trigger the explosion into hearts
      setTimeout(triggerExplosion, 15000);
    }
    
    // Add a compliment (with its image) at a random location
    function addCompliment() {
      const comp = document.createElement('div');
      comp.className = 'compliment';
      // Pick a random compliment object
      const data = compliments[Math.floor(Math.random() * compliments.length)];
      // Insert both image and text
      comp.innerHTML = `<img src="${data.image}" alt="compliment image" style="vertical-align:middle; margin-right:5px;"> <span>${data.text}</span>`;
      // Randomly position the element (using percentages to cover the page)
      const randomTop = Math.random() * 90;
      const randomLeft = Math.random() * 90;
      comp.style.top = randomTop + '%';
      comp.style.left = randomLeft + '%';
      // Random font size between 16px and 26px
      comp.style.fontSize = (16 + Math.random() * 10) + 'px';
      complimentContainer.appendChild(comp);
      // Fade it in
      setTimeout(() => {
        comp.style.opacity = 1;
      }, 50);
    }
    
    // Trigger the explosion: convert all compliments to hearts that fly in every direction
    function triggerExplosion() {
      clearInterval(complimentInterval);
      const comps = document.querySelectorAll('.compliment');
      comps.forEach(comp => {
        // Change the content to a heart emoji
        comp.innerHTML = '❤️';
        // Prepare a transition for transform and opacity (3 seconds)
        comp.style.transition = 'transform 3s ease-out, opacity 3s ease-out';
        // Generate a random angle (0 to 2π radians)
        const angle = Math.random() * 2 * Math.PI;
        // Generate a random distance between 200px and 600px
        const distance = 200 + Math.random() * 400;
        const translateX = Math.cos(angle) * distance;
        const translateY = Math.sin(angle) * distance;
        // Slight delay to ensure transition is applied, then set the transform and fade out
        setTimeout(() => {
          comp.style.transform = `translate(${translateX}px, ${translateY}px)`;
          comp.style.opacity = 0;
        }, 50);
      });
      // After 3 seconds (when the explosion is done), hide the compliment container and show the final question
      setTimeout(() => {
        complimentContainer.style.display = 'none';
        showFinalQuestion();
      }, 3000);
    }
    
    // Display the final question
    function showFinalQuestion() {
      finalQuestion.style.display = 'flex';
      setTimeout(() => {
        finalQuestion.classList.add('visible');
      }, 50);
    }
    
    // Final question button actions (customize as desired)
    document.getElementById('yes-btn').addEventListener('click', () => {
      alert("Yay! I'm so happy!");
    });
    document.getElementById('no-btn').addEventListener('click', () => {
      alert("Oh no! Maybe another time.");
    });
  </script>
</body>
</html>
